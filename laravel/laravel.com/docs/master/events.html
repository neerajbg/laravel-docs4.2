<!doctype html>

<html lang="en">


<!-- Mirrored from laravel.com/docs/master/events by HTTrack Website Copier/3.x [XR&CO'2013], Mon, 02 Feb 2015 04:45:53 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=UTF-8" /><!-- /Added by HTTrack -->
<head>
    <title>Laravel - The PHP framework for web artisans.</title>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=9,chrome=1">
    <meta name="author" content="Taylor Otwell">
    <meta name="description" content="Laravel - The PHP framework for web artisans.">
    <meta name="keywords" content="laravel, php, framework, web, artisans, taylor otwell">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="shortcut icon" href="../../favicon5e1f.png?v=2">

    <link href="../../assets/css/styles.css" rel="stylesheet">

    <!-- fonts -->
    <script src="../../../use.edgefonts.net/source-sans-pro_n3%2ci3%2cn4%2ci4%2cn6%2ci6%2cn7%2ci7.js"></script>
    <script src="../../../use.edgefonts.net/source-code-pro.js"></script>

    <!--[if IE]><link href="assets/css/ie.css" rel="stylesheet" type="text/css"><![endif]-->

    <!-- HTML5 elements in less than IE9, yes please! -->
    <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

    <!-- If less than IE8 add some JS for the webfont icons -->
    <!--[if lt IE 8]><script src="assets/js/ie_font.js"></script><![endif]-->

        <script>
        var _gaq=[['_setAccount','UA-23865777-1'],['_trackPageview']];
        (function(d,t){
            var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
            g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
            s.parentNode.insertBefore(g,s)
        }(document,'script'));
    </script>
    
</head>

<body id="index" class="page">

    <!--[if lt IE 7]>
        <p>Your browser is <em>ancient!</em> <a href="http://browsehappy.com/">Upgrade to a different browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to experience this site.</p>
    <![endif]-->

    <div id="wrapper">

    <header id="header" role="header">
    <div class="boxed">
        <div id="tagline">
            <h1>Documentation.</h1>
        </div>

        <div id="version">
            <ul class="nolist">
                                    <li class="current">
                        <a href="../master.html" title="Dev">Dev</a>
                    </li>
                                    <li class="">
                        <a href="../4.html" title="4.2">4.2</a>
                    </li>
                                    <li class="">
                        <a href="../4-2.html" title="4.1">4.1</a>
                    </li>
                                    <li class="">
                        <a href="../4-3.html" title="4.0">4.0</a>
                    </li>
                            </ul>
        </div>
    </div>
</header>

<nav id="primary">
    <div class="boxed">
        <div id="logo-head">
            <a href="http://laravel.com/"><img src="../../assets/img/logo-head.png" alt="Laravel"></a>
        </div>
        <ul class="primary-nav-ul">
            <li><a href="#">Welcome</a></li>
            <li class="current-item"><a href="http://laravel.com/docs" title="Documentation">Documentation</a></li>
            <li><a href="http://laravel.com/api/4.2" title="Laravel Framework API">API</a></li>
            <li><a href="http://laracasts.com/" title="Documentation">Laracasts</a></li>
            <li><a href="https://forge.laravel.com/">Forge</a></li>
            <li><a href="http://blog.laravel.com/">Blog</a></li>
            <li class="community">
              <a href="#" title="Laravel Community Resources">Community</a>
              <ul>
                <li><a href="https://github.com/laravel/laravel" title="Github">Github</a></li>
                <li><a href="http://twitter.com/laravelphp" title="Laravel on Twitter">Twitter</a></li>
                <li><a href="https://laracasts.com/discuss">Laracasts Forums</a></li>
                <li><a href="http://laravel.io/forum">Laravel.io Forums</a></li>
                <li><a href="http://larajobs.com/?partner=5">LaraJobs</a></li>
              </ul>
            </li>
        </ul>
        <a href="#" class="show-primary-nav">Menu</a>
    </div>
</nav>

<div id="content">

    <section id="documentation">
        <article class="boxed">

            <ul class="version-picker--mobile nolist">
                                <li class="current">
                    <a href="../master.html" title="Dev">Dev</a>
                </li>
                                <li class="">
                    <a href="../4.html" title="4.2">4.2</a>
                </li>
                                <li class="">
                    <a href="../4-2.html" title="4.1">4.1</a>
                </li>
                                <li class="">
                    <a href="../4-3.html" title="4.0">4.0</a>
                </li>
                            </ul>
            <a href="#" class="docs-show" data-show-text="Navigate" data-hide-text="Close">Navigate</a>

            <nav id="docs">
                <ul>
<li>Prologue
<ul>
<li><a href="introduction.html">Introduction</a></li>
<li><a href="releases.html">Release Notes</a></li>
<li><a href="upgrade.html">Upgrade Guide</a></li>
<li><a href="contributions.html">Contribution Guide</a></li>
</ul></li>
<li>Setup
<ul>
<li><a href="installation.html">Installation</a></li>
<li><a href="configuration.html">Configuration</a></li>
<li><a href="homestead.html">Homestead</a></li>
</ul></li>
<li>HTTP Basics
<ul>
<li><a href="routing.html">Routing</a></li>
<li><a href="middleware.html">Middleware</a></li>
<li><a href="controllers.html">Controllers</a></li>
<li><a href="requests.html">Requests</a></li>
<li><a href="responses.html">Responses</a></li>
<li><a href="views.html">Views</a></li>
</ul></li>
<li>Architecture Foundations
<ul>
<li><a href="providers.html">Service Providers</a></li>
<li><a href="container.html">Service Container</a></li>
<li><a href="contracts.html">Contracts</a></li>
<li><a href="facades.html">Facades</a></li>
<li><a href="lifecycle.html">Request Lifecycle</a></li>
<li><a href="structure.html">Application Structure</a></li>
</ul></li>
<li>Services
<ul>
<li><a href="authentication.html">Authentication</a></li>
<li><a href="billing.html">Billing</a></li>
<li><a href="cache.html">Cache</a></li>
<li><a href="collections.html">Collections</a></li>
<li><a href="bus.html">Command Bus</a></li>
<li><a href="extending.html">Core Extension</a></li>
<li><a href="encryption.html">Encryption</a></li>
<li><a href="errors.html">Errors &amp; Logging</a></li>
<li><a href="events.html">Events</a></li>
<li><a href="filesystem.html">Filesystem / Cloud Storage</a></li>
<li><a href="hashing.html">Hashing</a></li>
<li><a href="helpers.html">Helpers</a></li>
<li><a href="localization.html">Localization</a></li>
<li><a href="mail.html">Mail</a></li>
<li><a href="packages.html">Package Development</a></li>
<li><a href="pagination.html">Pagination</a></li>
<li><a href="queues.html">Queues</a></li>
<li><a href="session.html">Session</a></li>
<li><a href="templates.html">Templates</a></li>
<li><a href="testing.html">Unit Testing</a></li>
<li><a href="validation.html">Validation</a></li>
</ul></li>
<li>Database
<ul>
<li><a href="database.html">Basic Usage</a></li>
<li><a href="queries.html">Query Builder</a></li>
<li><a href="eloquent.html">Eloquent ORM</a></li>
<li><a href="schema.html">Schema Builder</a></li>
<li><a href="migrations.html">Migrations &amp; Seeding</a></li>
<li><a href="redis.html">Redis</a></li>
</ul></li>
<li>Artisan CLI
<ul>
<li><a href="artisan.html">Overview</a></li>
<li><a href="commands.html">Development</a></li>
</ul></li>
</ul>
            </nav>

            <div id="docs-content">
                <h1>Events</h1>
<ul>
<li><a href="#basic-usage">Basic Usage</a></li>
<li><a href="#queued-event-handlers">Queued Event Handlers</a></li>
<li><a href="#event-subscribers">Event Subscribers</a></li>
</ul>
<p><a name="basic-usage"></a></p>
<h2>Basic Usage</h2>
<p>The Laravel event facilities provides a simple observer implementation, allowing you to subscribe and listen for events in your application. Event classes are typically stored in the <code>app/Events</code> directory, while their handlers are stored in <code>app/Handlers/Events</code>.</p>
<p>You can generate a new event class using the Artisan CLI tool:</p>
<pre><code>php artisan make:event PodcastWasPurchased</code></pre>
<h4>Subscribing To An Event</h4>
<p>The <code>EventServiceProvider</code> included with your Laravel application provides a convenient place to register all event handlers. The <code>listen</code> property contains an array of all events (keys) and their handlers (values). Of course, you may add as many events to this array as your application requires. For example, let's add our <code>PodcastWasPurchased</code> event:</p>
<pre><code>/**
 * The event handler mappings for the application.
 *
 * @var array
 */
protected $listen = [
    'App\Events\PodcastWasPurchased' =&gt; [
        'App\Handlers\Events\EmailPurchaseConfirmation@handle',
    ],
];</code></pre>
<p>To generate a handler for an event, use the <code>handler:event</code> Artisan CLI command:</p>
<pre><code>php artisan handler:event EmailPurchaseConfirmation --event=PodcastWasPurchased</code></pre>
<p>Of course, manually running the <code>make:event</code> and <code>handler:event</code> commands each time you need a handler or event is cumbersome. Instead, simply add handlers and events to your <code>EventServiceProvider</code> and use the <code>event:generate</code> command. This command will generate any events or handlers that are listed in your <code>EventServiceProvider</code>:</p>
<pre><code>php artisan event:generate</code></pre>
<h4>Firing An Event</h4>
<p>Now we are ready to fire our event using the <code>Event</code> facade:</p>
<pre><code>$response = Event::fire(new PodcastWasPurchased($podcast));</code></pre>
<p>The <code>fire</code> method returns an array of responses that you can use to control what happens next in your application.</p>
<p>You may also use the <code>event</code> helper to fire an event:</p>
<pre><code>event(new PodcastWasPurchased($podcast));</code></pre>
<h4>Closure Listeners</h4>
<p>You can even listen to events without creating a separate handler class at all. For example, in the <code>boot</code> method of your <code>EventServiceProvider</code>, you could do the following:</p>
<pre><code>Event::listen('App\Events\PodcastWasPurchased', function($event)
{
    // Handle the event...
});</code></pre>
<h4>Stopping The Propagation Of An Event</h4>
<p>Sometimes, you may wish to stop the propagation of an event to other listeners. You may do so using by returning <code>false</code> from your handler:</p>
<pre><code>Event::listen('App\Events\PodcastWasPurchased', function($event)
{
    // Handle the event...

    return false;
});</code></pre>
<p><a name="queued-evnet-handlers"></a></p>
<h2>Queued Event Handlers</h2>
<p>Need to <a href="queues.html">queue</a> an event handler? It couldn't be any easier. When generating the handler, simply use the <code>--queued</code> flag:</p>
<pre><code>php artisan handler:event SendPurchaseConfirmation --event=PodcastWasPurchased --queued</code></pre>
<p>This will generate a handler class that implements the <code>Illuminate\Contracts\Queue\ShouldBeQueued</code> interface. That's it! Now when this handler is called for an event, it will be queued automatically by the event dispatcher.</p>
<p>If no exceptions are thrown when the handler is executed by the queue, the queued job will be deleted automatically after it has processed. If you need to access the queued job's <code>delete</code> and <code>release</code> methods manually, you may do so. The <code>Illuminate\Queue\InteractsWithQueue</code> trait, which is included by default on queued handlers, gives you access to these methods:</p>
<pre><code>public function handle(PodcastWasPurchased $event)
{
    if (true)
    {
        $this-&gt;release(30);
    }
}</code></pre>
<p>If you have an existing handler that you would like to convert to a queued handler, simply add the <code>ShouldBeQueued</code> interface to the class manually.</p>
<p><a name="event-subscribers"></a></p>
<h2>Event Subscribers</h2>
<h4>Defining An Event Subscriber</h4>
<p>Event subscribers are classes that may subscribe to multiple events from within the class itself. Subscribers should define a <code>subscribe</code> method, which will be passed an event dispatcher instance:</p>
<pre><code>class UserEventHandler {

    /**
     * Handle user login events.
     */
    public function onUserLogin($event)
    {
        //
    }

    /**
     * Handle user logout events.
     */
    public function onUserLogout($event)
    {
        //
    }

    /**
     * Register the listeners for the subscriber.
     *
     * @param  Illuminate\Events\Dispatcher  $events
     * @return array
     */
    public function subscribe($events)
    {
        $events-&gt;listen('App\Events\UserLoggedIn', 'UserEventHandler@onUserLogin');

        $events-&gt;listen('App\Events\UserLoggedOut', 'UserEventHandler@onUserLogout');
    }

}</code></pre>
<h4>Registering An Event Subscriber</h4>
<p>Once the subscriber has been defined, it may be registered with the <code>Event</code> class.</p>
<pre><code>$subscriber = new UserEventHandler;

Event::subscribe($subscriber);</code></pre>
<p>You may also use the <a href="../4.2/ioc.html">Laravel IoC container</a> to resolve your subscriber. To do so, simply pass the name of your subscriber to the <code>subscribe</code> method:</p>
<pre><code>Event::subscribe('UserEventHandler');</code></pre>
            </div>

        </article>
    </section>

</div>

<footer id="foot" class="textcenter">
    <div class="boxed">

        <nav id="secondary">
            <div id="logo-foot">
                <a href="http://laravel.com/"><img src="../../assets/img/logo-foot.png" alt="Laravel"></a>
            </div>
            <ul>
                <li><a href="#">Welcome</a></li>
                <li class="current-item"><a href="http://laravel.com/docs" title="Documentation">Documentation</a></li>
                <li><a href="http://laravel.com/api/4.2" title="Laravel Framework API">API</a></li>
                <li><a href="http://laracasts.com/" title="Documentation">Laracasts</a></li>
                <li><a href="https://forge.laravel.com/">Forge</a></li>
                <li><a href="http://blog.laravel.com/">Blog</a></li>
            </ul>
        </nav>

    </div>
</footer>

<div id="top">
    <a href="#index" title="Back to the top">
        <i class="icon-chevron-up"></i>
    </a>
</div>


    </div>

    <section id="copyright" class="textcenter">
        <div class="boxed">
            <div class="animated slideInLeft">
                Laravel is a trademark of Taylor Otwell.<br class="br-mobile--footer">
                Copyright &copy; <a href="http://twitter.com/taylorotwell" title="Taylor Otwell" target="_blank">Taylor Otwell</a>.<br class="br-mobile--footer">
                Website built with &hearts; <a href="http://ikreativ.com/" title="iKreativ" target="_blank">iKreativ</a>;<br class="br-mobile--footer">
                responsive by <a href="http://tighten.co/" title="Tighten Co." target="_blank">Tighten Co.</a>
            </div>
        </div>
    </section>

    <script src="../../assets/js/bundle.js"></script>

</body>

<!-- Mirrored from laravel.com/docs/master/events by HTTrack Website Copier/3.x [XR&CO'2013], Mon, 02 Feb 2015 04:45:53 GMT -->
</html>
